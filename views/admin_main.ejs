<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>관리자 페이지</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icon-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Custom CSS -->
    <link href="/css/style.css" rel="stylesheet" />
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const token = localStorage.getItem('token');

        if (!token) {
          alert('로그인 정보가 만료되었습니다. 다시 로그인해주세요.');
          window.location.href = '/login';
          return;
        }

        fetch('/profile', {
          method: 'GET',
          headers: { Authorization: `Bearer ${token}` },
        })
          .then((response) => {
            if (!response.ok) {
              alert('인증 실패: 다시 로그인해주세요.');
              localStorage.removeItem('token');
              window.location.href = '/login';
            }
          })
          .catch((error) => {
            console.error('프로필 요청 중 오류 발생:', error);
            localStorage.removeItem('token');
            window.location.href = '/login';
          });
      });
    </script>
  </head>

  <body>
    <!-- 상단 네비게이션 바 -->
    <nav class="navbar navbar-light bg-light px-3">
      <!-- 로고 (가운데 정렬: 작은 화면에서만 표시) -->
      <a class="navbar-brand d-lg-none" href="/">
        <img src="/images/logo.svg" alt="브레인센스_로고" />
      </a>

      <!-- 로고 (왼쪽 정렬: 큰 화면에서만 표시) -->
      <a class="navbar-brand d-none d-lg-block" href="/main">
        <img src="/images/logo.svg" alt="브레인센스_로고" />
      </a>

      <div class="d-flex justify-content-end align-items-center gap-2">
        <!-- 큰 화면에서 표시되는 버튼 -->
        <button
          class="btn btn-primary d-none d-lg-block"
          onclick="location.href='https://www.naver.com'"
        >
          회사 홈페이지로 이동
        </button>

        <!-- 작은 화면에서 표시되는 홈 아이콘 버튼 -->
        <button
          class="btn btn-primary d-lg-none"
          onclick="location.href='https://www.naver.com'"
        >
          <i class="bi bi-house text-white"></i>
        </button>

        <!-- 로그아웃 버튼 (큰 화면에서만 표시) -->
        <button class="btn btn-danger d-none d-lg-block" onclick="logout()">
          로그아웃
        </button>

        <!-- 로그아웃 아이콘 (작은 화면에서만 표시) -->
        <button class="btn btn-danger d-lg-none" onclick="logout()">
          <i class="bi bi-box-arrow-right text-white"></i>
        </button>
      </div>
    </nav>

    <!-- 본문 컨테이너 -->
    <div class="container mt-5">
      <div class="row g-4">
        <!-- 카드 1 -->
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <img src="/images/blog.webp" class="card-img-top" alt="blogImage" />
            <div class="card-body">
              <h3 class="card-title text-center">
                <strong>📢 회사 소식 관리</strong>
              </h3>
              <hr />
              <p class="card-text">
                <span
                  >🔹 회사에서 운영 중인 소식과 공지를 등록, 수정, 삭제할 수
                  있습니다.</span
                >
                <span
                  >🔹 최신 뉴스와 업데이트를 유지하여 사용자에게 정확한 정보를
                  제공합니다.</span
                >
                <span
                  >🔹 직관적인 인터페이스로 손쉽게 콘텐츠를 관리할 수
                  있습니다.</span
                >
              </p>
              <div class="space"></div>
              <div class="text-end">
                <button
                  class="btn btn-primary"
                  onclick="location.href='/admin_crud'"
                >
                  📝 회사 소식 수정하기 <i class="bi bi-arrow-right"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 카드 2 -->
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <img src="/images/list.webp" class="card-img-top" alt="listImage" />
            <div class="card-body">
              <h3 class="card-title text-center">
                <strong>📋 외주 요청 리스트 확인</strong>
              </h3>
              <hr />
              <p class="card-text">
                <span
                  >🔹 접수된 외주 요청 목록을 한눈에 확인할 수 있습니다.</span
                >
                <span
                  >🔹 요청된 작업의 세부 내용을 빠르게 검토하고 진행 상태를
                  관리하세요.</span
                >
                <span
                  >🔹 요청의 우선순위를 설정하여 효과적으로 작업을 처리할 수
                  있습니다.</span
                >
              </p>
              <div class="space"></div>
              <div class="text-end">
                <button
                  class="btn btn-primary"
                  onclick="location.href='/admin_list'"
                >
                  📄 외주 요청 리스트 보기 <i class="bi bi-arrow-right"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 카드 3 -->
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <img
              src="/images/graph.webp"
              class="card-img-top"
              alt="graphImage"
            />
            <div class="card-body">
              <h3 class="card-title text-center">
                <strong>📊 접속자 통계 확인</strong>
              </h3>
              <hr />
              <p class="card-text">
                <span
                  >🔹 웹사이트 방문자 수와 페이지뷰를 한눈에 확인할 수
                  있습니다.</span
                >
                <span
                  >🔹 실시간 접속 현황과 일별, 월별 트래픽 데이터를
                  분석하세요.</span
                >
                <span
                  >🔹 통계를 기반으로 사용자 행동을 이해하고 효율적인 전략을
                  수립할 수 있습니다.</span
                >
              </p>
              <div class="space"></div>
              <div class="text-end">
                <button
                  class="btn btn-primary"
                  onclick="location.href='/admin_statistics'"
                >
                  📈 접속자 통계 보기 <i class="bi bi-arrow-right"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-light text-center text-lg-start mt-5">
      <!-- Copyright -->
      <div
        class="text-center p-3"
        style="background-color: rgba(0, 0, 0, 0.05)"
      >
        © 2025 브레인센스. All rights reserved.
      </div>
    </footer>

    <!-- Bootstrap JS and Icons -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <script>
      function logout() {
        localStorage.removeItem('token');
        window.location.href = '/login';
      }
    </script>
  </body>
</html>
